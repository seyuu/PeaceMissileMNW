<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Peace Missile Game</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
    async function initAnalytics() {
      // Token ve appName’i backend’den al
      const res = await fetch('https://peacebot-641906716058.europe-central2.run.app/get_bot_config');
      const config = await res.json();
      window.telegramAnalytics.init({
        token: config.access_token,
        appName: config.bot_username
      });
    }
    </script>
    <script 
        async 
        src="https://tganalytics.xyz/index.js" 
        onload="initAnalytics()" 
        type="text/javascript"
    ></script>
    <style> 
        body, html { 
        margin: 0; 
        padding: 0; 
        overflow: hidden; 
        background-color: #000; 
        width: 100vw; 
        height: 100vh; 
        display: flex;
        justify-content: center;
        align-items: center;
    } 
    #phaser-game {
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    canvas {
        display: block;
        width: 100vw !important;
        height: 100vh !important;
        max-width: 100vw !important;
        max-height: 100vh !important;
        min-width: 100vw !important;
        min-height: 100vh !important;
    }
    </style>
</head>
<body>
<div id="phaser-game"></div>
<script type="text/javascript" src="./game.js"></script>
</body>
</html>
